{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\AI\\u91D1\\u878D\\\\admin-frontend\\\\src\\\\components\\\\WalletConnector.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport Web3Modal from 'web3modal';\nimport { ethers } from 'ethers';\nimport WalletConnectProvider from '@walletconnect/web3-provider';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction WalletConnector() {\n  _s();\n  const [walletAddress, setWalletAddress] = useState('');\n  const providerOptions = {\n    walletconnect: {\n      package: WalletConnectProvider,\n      options: {\n        infuraId: \"YOUR_INFURA_ID\"\n      }\n    }\n  };\n  const connectWallet = async () => {\n    const web3Modal = new Web3Modal({\n      cacheProvider: true,\n      providerOptions\n    });\n    try {\n      const instance = await web3Modal.connect();\n      const provider = new ethers.providers.Web3Provider(instance);\n      const signer = provider.getSigner();\n      const address = await signer.getAddress();\n      setWalletAddress(address);\n\n      // 切换到BSC网络\n      await provider.send(\"wallet_addEthereumChain\", [{\n        chainId: '0x38',\n        chainName: 'Binance Smart Chain',\n        nativeCurrency: {\n          name: 'BNB',\n          symbol: 'BNB',\n          decimals: 18\n        },\n        rpcUrls: ['https://bsc-dataseed.binance.org/'],\n        blockExplorerUrls: ['https://bscscan.com']\n      }]);\n    } catch (error) {\n      console.error(\"钱包连接失败:\", error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: connectWallet,\n      children: \"\\u8FDE\\u63A5\\u94B1\\u5305\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), walletAddress && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"\\u5DF2\\u8FDE\\u63A5\\u94B1\\u5305\\u5730\\u5740: \", walletAddress]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 25\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n}\n_s(WalletConnector, \"SM6J6Jv3vxLi47+RieKFbfI3nq0=\");\n_c = WalletConnector;\nexport default WalletConnector;\nvar _c;\n$RefreshReg$(_c, \"WalletConnector\");","map":{"version":3,"names":["React","useState","Web3Modal","ethers","WalletConnectProvider","jsxDEV","_jsxDEV","WalletConnector","_s","walletAddress","setWalletAddress","providerOptions","walletconnect","package","options","infuraId","connectWallet","web3Modal","cacheProvider","instance","connect","provider","providers","Web3Provider","signer","getSigner","address","getAddress","send","chainId","chainName","nativeCurrency","name","symbol","decimals","rpcUrls","blockExplorerUrls","error","console","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Administrator/Desktop/AI金融/admin-frontend/src/components/WalletConnector.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport Web3Modal from 'web3modal';\r\nimport { ethers } from 'ethers';\r\nimport WalletConnectProvider from '@walletconnect/web3-provider';\r\n\r\nfunction WalletConnector() {\r\n  const [walletAddress, setWalletAddress] = useState('');\r\n\r\n  const providerOptions = {\r\n    walletconnect: {\r\n      package: WalletConnectProvider,\r\n      options: {\r\n        infuraId: \"YOUR_INFURA_ID\"\r\n      }\r\n    }\r\n  };\r\n\r\n  const connectWallet = async () => {\r\n    const web3Modal = new Web3Modal({\r\n      cacheProvider: true,\r\n      providerOptions\r\n    });\r\n\r\n    try {\r\n      const instance = await web3Modal.connect();\r\n      const provider = new ethers.providers.Web3Provider(instance);\r\n      const signer = provider.getSigner();\r\n      const address = await signer.getAddress();\r\n      setWalletAddress(address);\r\n\r\n      // 切换到BSC网络\r\n      await provider.send(\"wallet_addEthereumChain\", [{\r\n        chainId: '0x38',\r\n        chainName: 'Binance Smart Chain',\r\n        nativeCurrency: {\r\n          name: 'BNB',\r\n          symbol: 'BNB',\r\n          decimals: 18\r\n        },\r\n        rpcUrls: ['https://bsc-dataseed.binance.org/'],\r\n        blockExplorerUrls: ['https://bscscan.com']\r\n      }]);\r\n    } catch (error) {\r\n      console.error(\"钱包连接失败:\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <button onClick={connectWallet}>连接钱包</button>\r\n      {walletAddress && <p>已连接钱包地址: {walletAddress}</p>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default WalletConnector;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,OAAOC,SAAS,MAAM,WAAW;AACjC,SAASC,MAAM,QAAQ,QAAQ;AAC/B,OAAOC,qBAAqB,MAAM,8BAA8B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEjE,SAASC,eAAeA,CAAA,EAAG;EAAAC,EAAA;EACzB,MAAM,CAACC,aAAa,EAAEC,gBAAgB,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EAEtD,MAAMU,eAAe,GAAG;IACtBC,aAAa,EAAE;MACbC,OAAO,EAAET,qBAAqB;MAC9BU,OAAO,EAAE;QACPC,QAAQ,EAAE;MACZ;IACF;EACF,CAAC;EAED,MAAMC,aAAa,GAAG,MAAAA,CAAA,KAAY;IAChC,MAAMC,SAAS,GAAG,IAAIf,SAAS,CAAC;MAC9BgB,aAAa,EAAE,IAAI;MACnBP;IACF,CAAC,CAAC;IAEF,IAAI;MACF,MAAMQ,QAAQ,GAAG,MAAMF,SAAS,CAACG,OAAO,CAAC,CAAC;MAC1C,MAAMC,QAAQ,GAAG,IAAIlB,MAAM,CAACmB,SAAS,CAACC,YAAY,CAACJ,QAAQ,CAAC;MAC5D,MAAMK,MAAM,GAAGH,QAAQ,CAACI,SAAS,CAAC,CAAC;MACnC,MAAMC,OAAO,GAAG,MAAMF,MAAM,CAACG,UAAU,CAAC,CAAC;MACzCjB,gBAAgB,CAACgB,OAAO,CAAC;;MAEzB;MACA,MAAML,QAAQ,CAACO,IAAI,CAAC,yBAAyB,EAAE,CAAC;QAC9CC,OAAO,EAAE,MAAM;QACfC,SAAS,EAAE,qBAAqB;QAChCC,cAAc,EAAE;UACdC,IAAI,EAAE,KAAK;UACXC,MAAM,EAAE,KAAK;UACbC,QAAQ,EAAE;QACZ,CAAC;QACDC,OAAO,EAAE,CAAC,mCAAmC,CAAC;QAC9CC,iBAAiB,EAAE,CAAC,qBAAqB;MAC3C,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,SAAS,EAAEA,KAAK,CAAC;IACjC;EACF,CAAC;EAED,oBACE/B,OAAA;IAAAiC,QAAA,gBACEjC,OAAA;MAAQkC,OAAO,EAAExB,aAAc;MAAAuB,QAAA,EAAC;IAAI;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,EAC5CnC,aAAa,iBAAIH,OAAA;MAAAiC,QAAA,GAAG,8CAAS,EAAC9B,aAAa;IAAA;MAAAgC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAC9C,CAAC;AAEV;AAACpC,EAAA,CAhDQD,eAAe;AAAAsC,EAAA,GAAftC,eAAe;AAkDxB,eAAeA,eAAe;AAAC,IAAAsC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}